# üìä –û–¢–ß–ï–¢ –û–ë –ò–ù–¢–ï–ì–†–ê–¶–ò–ò BITGET –ò PHEMEX

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Bitget** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω—ã API –∫–ª—é—á–∏ –≤ `production_config.py`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `websocket_manager.py`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `trading_engine.py` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π passphrase
- **–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç, WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Phemex** ‚ö†Ô∏è
- –î–æ–±–∞–≤–ª–µ–Ω—ã API –∫–ª—é—á–∏ –≤ `production_config.py`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `websocket_manager.py`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `trading_engine.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏/VPN (aiohttp + proxy rotation) –≤ `websocket_manager.py`
- –î–æ–±–∞–≤–ª–µ–Ω smoke‚Äë—Ç–µ—Å—Ç: `test_phemex_ws.py` (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, –ø–æ–¥–ø–∏—Å–∫–∏ `orderbook.subscribe` L20 –∏ `market24h.subscribe`)
- –°—Ç–∞—Ç—É—Å: —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `PROXY_CONFIG` –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞—Ä** ‚úÖ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä –¥–ª—è –≤—Å–µ—Ö –±–∏—Ä–∂
- –¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ 100 –ø–∞—Ä —Å –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä: 96

### 4. **–£–ª—É—á—à–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞

### 5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–∫–∞–Ω–µ—Ä–∞** ‚úÖ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `opportunities_found`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∫–æ–º–∏—Å—Å–∏—è–º —á–µ—Ä–µ–∑ `config.get('fee')`
- –î–æ–±–∞–≤–ª–µ–Ω—ã `rest_url` –¥–ª—è –≤—Å–µ—Ö –±–∏—Ä–∂

## üìà –¢–ï–ö–£–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –±–∏—Ä–∂–∏:
- MEXC: 100 –ø–∞—Ä (REST API)
- Bybit: 100 –ø–∞—Ä 
- Huobi: 100 –ø–∞—Ä
- Bitget: 100 –ø–∞—Ä (WebSocket ‚úÖ)
- Phemex: 100 –ø–∞—Ä (WebSocket —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ ‚Äî –æ–∂–∏–¥–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 1.2 –º–∏–Ω
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π: 580
- –ù–∞–π–¥–µ–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π: 0
- WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π: 2208
- –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä: 96
```

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### API –∫–ª—é—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è:
- **Bitget:** ‚úÖ (—Å passphrase)
- **Phemex:** ‚úÖ

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–ª–∏:
- –†–µ–∂–∏–º: DEMO
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: 0.05%
- –°–ª–∏–ø–ø–µ–¥–∂: 0.05%
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: $100

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

1. **Phemex WebSocket (–≥–µ–æ–±–ª–æ–∫)**
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN/–ø—Ä–æ–∫—Å–∏ —Å–æ–≥–ª–∞—Å–Ω–æ `PROXY_CONFIG`; –≤ –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `aiohttp` + proxy rotation –¥–ª—è WS
   - –î–µ–π—Å—Ç–≤–∏—è: –ó–∞–ø—É—Å—Ç–∏—Ç—å `python3 test_phemex_ws.py` –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö; –ø—Ä–∏ —Å–±–æ–µ –≤–∫–ª—é—á–∏—Ç—å REST‚Äëfallback

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π**
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–∏–∑–∫–∏–µ —Å–ø—Ä–µ–¥—ã –Ω–∞ —Ä—ã–Ω–∫–µ
   - –†–µ—à–µ–Ω–∏–µ: –£–≤–µ–ª–∏—á–∏—Ç—å MIN_PROFIT_THRESHOLD –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–µ –ø–∞—Ä—ã

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–î–ª—è Phemex:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `PROXY_URL` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
   - –ò–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ REST API polling

2. **–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏:**
   - –°–Ω–∏–∑–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ —á–µ—Ä–µ–∑ VIP —Å—Ç–∞—Ç—É—Å
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–µ –ø–∞—Ä—ã (SHIB, PEPE, BONK)
   - –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø–∞—Ä

3. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Å 'demo' –Ω–∞ 'paper' –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∏—Ä–∂
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ `critical_scanner_monitor.py`

## üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ WebSocket

* __–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤__: –≤ `websocket_manager.py` (`WebSocketManager.start()`) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è `message_counts`/`error_counts` –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–∏—Ä–∂, –ø–ª—é—Å –∑–∞—â–∏—Ç–∞ –≤ `_poll_mexc_rest()` –Ω–∞ —Å–ª—É—á–∞–π —Å—Ç–∞—Ä—Ç–∞ REST —Ä–∞–Ω—å—à–µ WS. –≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç KeyError –ø—Ä–∏ —Ä–∞–Ω–Ω–∏—Ö –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞—Ö.
* __–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫__: –ø–æ –ª–æ–≥–∞–º —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—Ö –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –±–∏—Ä–∂–∞—Ö:
  - Bybit: `op=subscribe`, –¥–∞–ª—å–Ω–µ–π—à–∏–µ —Ç–æ–ø–∏–∫–∏ –≤ `topic`
  - Huobi: `status=ok` –Ω–∞ `market.<symbol>.ticker`
  - OKX: `event=subscribe` –ø–æ –∫–∞–Ω–∞–ª–∞–º `tickers` –∏ `books5`
  - Binance: `result` —Å `id=1` –ø–æ—Å–ª–µ `SUBSCRIBE`
  - Gate.io/KuCoin/Kraken: –ø—Ä–∏—Ö–æ–¥—è—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
* __–ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ—Ç—Ä–∏–∫–∏__: –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç `message_counts[ex]` –Ω–∞ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏; `error_counts[ex]` ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞/–æ–±—Ä–∞–±–æ—Ç–∫–∏. –î–ª—è OKX –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–¥–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞.
* __–ü–∏–Ω–≥/–ø–æ–Ω–≥ –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ__: –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è `WEBSOCKET_CONFIG['ping_interval'/'ping_timeout']`; –¥–ª—è Bybit/Huobi/Gate/Bitget/Phemex —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ü–∏–∫–ª—ã –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ü–∏–∫–ª –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è OKX/KuCoin/Kraken.
* __Smoke‚Äë—Ç–µ—Å—Ç—ã__: `test_ws_data.py` (MEXC/Bybit/Huobi), `test_bitget_ws.py` (Bitget) –∏ `test_phemex_ws.py` (Phemex —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏).
  - Bitget: `python3 test_bitget_ws.py` ‚Äî 20s —Ä–∞–Ω; –æ–∂–∏–¥–∞–µ–º login ack, —Ç–∏–∫–µ—Ä—ã, —Å–≤–æ–¥–∫—É.
  - Phemex: `python3 test_phemex_ws.py` ‚Äî 20s —Ä–∞–Ω; –æ–∂–∏–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è orderbook/market24h. –ü—Ä–∏ Handshake 403 ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `PROXY_CONFIG`.

### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Bitget Smoke‚Äë—Ç–µ—Å—Ç–∞ ‚Äî —Å–≤–µ–∂–∏–π –∑–∞–ø—É—Å–∫

```
Endpoint: wss://ws.bitget.com/spot/v1/stream
Duration: 20s
Symbols: BTCUSDT, ETHUSDT, XRPUSDT
Login ack: OK
Subscribe acks: OK (instType=sp)
Messages total: 215
Ticker snapshots parsed: 211
Sample prices:
  XRP/USDT: bid 2.9002, ask 2.9003
  BTC/USDT: bid 113610.01, ask 113610.02
  ETH/USDT: bid 4148.49, ask 4148.5
```

### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Phemex Smoke‚Äë—Ç–µ—Å—Ç–∞ (proxy rotation)

```
Endpoints tried: wss://ws.phemex.com/ws, wss://phemex.com/ws, wss://vapi.phemex.com/ws, wss://testnet.phemex.com/ws
Proxy order (excerpt) and results:
- socks5h://172.31.128.1:2080 -> timeout
- http://172.31.128.1:2080 -> timeout
- socks5h://127.0.0.1:2080 -> connect failed
- http://127.0.0.1:2080 -> connect failed
- http://user‚Ä¶@38.180.147.238:443 -> server disconnected
- https://user‚Ä¶@38.180.147.238:443 -> 404 Not Found
- http://user‚Ä¶@192.3.251.79:443 -> server disconnected
- https://user‚Ä¶@147.45.135.67:443 -> 400 Bad Request
- http://user‚Ä¶@185.215.187.165:443 -> server disconnected
- https://user‚Ä¶@185.215.187.165:443 -> 404 Not Found
Direct (no proxy):
- 403/410 handshake failure
Exit code: 1 (WSServerHandshakeError 403 testnet)
```

- __–ü—Ä–æ–±–ª–µ–º–∞ SOCKS__: —Å—Ö–µ–º–∞ `socks5h` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `aiohttp_socks` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `socks5://` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–∫–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
- __HTTP‚Äë–ø—Ä–æ–∫—Å–∏__: –æ—Ç–≤–µ—Ç—ã 400/404 –∏ –æ–±—Ä—ã–≤—ã –≥–æ–≤–æ—Ä—è—Ç –æ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ CONNECT‚Äë–ø—Ä–æ–∫—Å–∏ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–æ—Ä—Ç/—É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ; —Ç–∞–∫–∏–µ –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ç—É–Ω–Ω–µ–ª–∏—Ä—É—é—Ç WebSocket (wss).
- __–ì–µ–æ–±–ª–æ–∫__: –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403/410 ‚Äî Phemex —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–∫—Å–∏/VPN.

__–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏__:
- –û–±–Ω–æ–≤–∏—Ç—å `PROXY_CONFIG` –Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ HTTP CONNECT –∏–ª–∏ SOCKS5 –ø—Ä–æ–∫—Å–∏ (—Ñ–æ—Ä–º–∞—Ç `socks5://user:pass@host:port`), –∏—Å–∫–ª—é—á–∏—Ç—å `socks5h://`.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É: `pip show aiohttp-socks` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω); –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `pip install aiohttp-socks`.
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –≤–Ω–µ –∫–æ–¥–∞: `curl -x http://user:pass@host:port https://api.ipify.org?format=json` (–æ–∂–∏–¥–∞–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π IP –ø—Ä–æ–∫—Å–∏) –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ CONNECT –¥–æ `wss://vapi.phemex.com:443` –ø—Ä–æ—Ö–æ–¥–∏—Ç.
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π VPN (WireGuard/Clash/WARP). –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ VPN‚Äë–º–∞—Ä—à—Ä—É—Ç.
- –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST‚Äëfallback –¥–ª—è Phemex.

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

1. __–°—á–µ—Ç—á–∏–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã__: `get_statistics()` –∏–∑ `websocket_manager.py` –æ—Ç—Ä–∞–∂–∞–µ—Ç `message_counts`/`error_counts` –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–∏—Ä–∂ (–Ω–µ—Ç KeyError, –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã).
2. __–ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã__: –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–ø–µ—Ä–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª –≤—ã—à–µ).
3. __–°–∫–æ—Ä–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π__: —É—Å—Ç–æ–π—á–∏–≤–æ ‚â• 1 msg/s –Ω–∞ –±–∏—Ä–∂—É –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º –Ω–∞–±–æ—Ä–µ –ø–∞—Ä –≤ —Ç–µ—á–µ–Ω–∏–µ ‚â• 60 —Å–µ–∫—É–Ω–¥ (–ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ).
4. __–û—à–∏–±–∫–∏ –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º__: –æ—Ç–Ω–æ—à–µ–Ω–∏–µ `error_counts[ex] / max(1, message_counts[ex]) ‚â§ 1%` –Ω–∞ –∫–∞–∂–¥–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏; –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ reconnect‚Äë—ã.
5. __–ü—Ä–æ–∫—Å–∏/–≥–µ–æ–±–ª–æ–∫__: –¥–ª—è Phemex —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ WS‚Äë–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ `aiohttp` + proxy rotation –∏–∑ `PROXY_CONFIG`; –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å `python3 test_phemex_ws.py` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ REST‚Äëfallback. –î–ª—è Binance –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ö–æ—Å—Ç—ã.
6. __Fallback__: –¥–ª—è MEXC –∞–∫—Ç–∏–≤–µ–Ω REST‚Äëpolling (`_poll_mexc_rest`) —Å –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∫—ç—à–∞ –∏ –º–µ—Ç—Ä–∏–∫.
7. __–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏__: `websockets` –∏ `aiohttp` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `requirements.txt` (–∞–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ –º–æ–º–µ–Ω—Ç –æ—Ç—á–µ—Ç–∞).
8. __–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥__: –≤–∫–ª—é—á–µ–Ω `critical_scanner_monitor.py` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, —Å—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —á–∞—Å—Ç–æ—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –æ—à–∏–±–∫–∏.
9. __–õ–∏–º–∏—Ç—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏__: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ø–∞—Ä –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∏ rate limits) –≤—ã–¥–µ—Ä–∂–∞–Ω–æ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö (—Ç–∏–∫–µ—Ä—ã/—Å—Ç–∞–∫–∞–Ω—ã).

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

* __Bitget__: –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ `op=login` —Å HMAC‚Äë–ø–æ–¥–ø–∏—Å—å—é (timestamp + `GET/user/verify`), –ø–æ–ª—è: `apiKey`, `passphrase`, `sign`. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–∏–∫–µ—Ä—ã: `op=subscribe`, args `{instType: SP, channel: ticker, instId: <SYMBOL>}`. –°–∏–º–≤–æ–ª—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ –±–µ–∑ —Å–ª–µ—à–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `BTCUSDT`.
* __Phemex__: –ø—É–±–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, `orderbook.subscribe` c –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `["<SYMBOL>.L20"]` –∏ `market24h.subscribe`. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `aiohttp` —Å proxy rotation –∏–∑ `PROXY_CONFIG` (–¥–ª—è –æ–±—Ö–æ–¥–∞ –≥–µ–æ–±–ª–æ–∫–∞); –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–∫—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ REST‚Äëfallback.
* __Bybit__: `op=subscribe`, —Ç–æ–ø–∏–∫–∏ `orderbook.1.<SYMBOL>` –∏ `tickers.<SYMBOL>`.
* __Huobi__: `sub: market.<symbol>.ticker` (gzip, –æ—Ç–≤–µ—Ç `status=ok`).
* __OKX__: `op=subscribe`, –∫–∞–Ω–∞–ª—ã `tickers` –∏ `books5` –ø–æ `instId`.
* __Binance__: –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ API‚Äë–∫–ª—é—á–µ–π. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ WS‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: `wss://stream.binance.com:9443/ws`, `wss://stream.binance.com:443/ws`, `wss://stream.binancezh.com:9443/ws`. –ü–æ–¥–ø–∏—Å–∫–∞: `{"method":"SUBSCRIBE","params":["btcusdt@ticker","..."],"id":1}`.
* __Gate.io__: `spot.tickers` (payload `[PAIR]`), `spot.order_book` (payload `[PAIR, "5", "100ms"]`).
* __KuCoin__: `type: subscribe`, —Ç–æ–ø–∏–∫–∏ `/market/ticker:<SYMBOL>` –∏ `/market/level2:<SYMBOL>`.
* __Kraken__: `event: subscribe`, `subscription: {name: ticker}` –∏ `book, depth: 5`.
* __MEXC__: `method: SUBSCRIPTION`, `spot@public.miniTickers.v3.api@<SYMBOL>`.

## üåê Proxy/VPN

* __Phemex__: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `aiohttp.ClientSession.ws_connect` —Å rotation –ø–æ `PROXY_CONFIG` (https/http); –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—Ö–µ ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è; –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –ø—Ä–æ–≤–∞–ª–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ REST‚Äëpolling. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `PROXY_CONFIG['enabled']=True` –∏ –∑–∞–¥–∞–Ω—ã —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ–∫—Å–∏.
* __Binance__: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–µ—Ä–µ–±–æ—Ä –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ (`wss://stream.binance.com:9443/ws`, `wss://stream.binance.com:443/ws`, `wss://stream.binancezh.com:9443/ws`). –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ `–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è` –∏ `–ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞`.
* __–û–±—â–µ–µ__: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `PROXY_CONFIG` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è REST, –∞ –¥–ª—è WS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–±–æ —Ç–∞ –∂–µ —Å–µ—Ç—å (VPN), –ª–∏–±–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π —Ç—É–Ω–Ω–µ–ª—å.

## üß≠ –¢–µ—Å—Ç‚Äë–ø–ª–∞–Ω –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. __Smoke‚Äë—Ç–µ—Å—Ç WS__: –∑–∞–ø—É—Å—Ç–∏—Ç—å `test_ws_data.py` (MEXC/Bybit/Huobi), `test_bitget_ws.py` (Bitget) –∏ `test_phemex_ws.py` (Phemex —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏). –û–∂–∏–¥–∞–µ—Ç—Å—è: –ø–µ—Ä–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
2. __–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫__: –∑–∞–ø—É—Å—Ç–∏—Ç—å `production_multi_exchange_bot.py` (–∏–ª–∏ `start_demo.py`) —Å 20‚Äì30 –ø–∞—Ä–∞–º–∏. –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `get_statistics()` –≤ `websocket_manager.py`: `message_counts[ex] > 120` –∏ `error_counts[ex] / message_counts[ex] ‚â§ 1%` –¥–ª—è –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –±–∏—Ä–∂–∏.
3. __–†–µ–∫–æ–≤–µ—Ä –ø–æ—Å–ª–µ —Ä–∞–∑—Ä—ã–≤–∞__: –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å/VPN –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å. –ü—Ä–∏–Ω—è—Ç—å, –µ—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
4. __–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥__: –≤–∫–ª—é—á–∏—Ç—å `critical_scanner_monitor.py` –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ç—É—Å—ã WS –∑–µ–ª—ë–Ω—ã–µ, –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ —Å–≤–µ–∂–µ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö.

## ‚úÖ –ò–¢–û–ì

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Bitget –∏ Phemex –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üéâ

### üöÄ **–§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°:**
- ‚úÖ **Bitget**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω —Å WebSocket
- ‚úÖ **MEXC**: –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ REST API
- ‚úÖ **Bybit**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (`wss://stream.bybit.com/v5/public/linear`)  
- ‚úÖ **Huobi**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (`wss://api.huobi.pro/ws`)
- ‚úÖ **OKX**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (`wss://ws.okx.com:8443/ws/v5/public`)
- ‚úÖ **Gate.io**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (`wss://api.gateio.ws/ws/v4/`)
- ‚ö†Ô∏è **Phemex**: WS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (aiohttp + rotation); –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω –¥–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### üìà **–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**
```
üî• –ê–∫—Ç–∏–≤–Ω—ã—Ö –±–∏—Ä–∂: 6 –∏–∑ 7
üìä –¢–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä: 103  
‚ö° –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π: –ê–∫—Ç–∏–≤–Ω–æ
üîå WebSocket: –í—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç
üíé –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –ø–æ–∏—Å–∫: –ê–∫—Ç–∏–≤–µ–Ω
üéØ –ù–∞–π–¥–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∞–Ω–∞–ª–∏–∑–∞
```

### ‚úÖ **–í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´:**
1. –î–æ–±–∞–≤–ª–µ–Ω—ã API –∫–ª—é—á–∏ –¥–ª—è Bitget –∏ Phemex
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è  
3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ —Å–∫–∞–Ω–µ—Ä–∞
4. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ `ws_url`
5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–¥—Å—á–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–∏—Ä–∂
6. –ë–æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 4 –±–∏—Ä–∂–∞–º–∏

**üéØ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –≤ —Ä–µ–∂–∏–º–µ paper trading!**
